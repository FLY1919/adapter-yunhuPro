# 功能限制与实现细节

## 音视频格式转换

云湖的机器人接口不支持直接发送音频文件。

因此，当您尝试发送音频时，本适配器会自动调用 `ctx.ffmpeg` 将其转换为视频格式，然后再进行发送。

## 文件大小限制

云湖对不同类型的文件有不同的上传大小限制：

- **图片**：最大 10MB
- **视频**：最大 20MB
- **其他文件**：最大 20MB

为了尽可能确保文件能成功发送：
- **视频**：如果视频大小超过 20MB，适配器会尝试使用 `ctx.ffmpeg` 对其进行压缩，直到符合大小限制。
- **图片和文件**：如果图片或其他文件的大小超限，适配器无法进行处理，将会直接抛出错误。

## 图片资源访问

直接访问云湖的图片 URL 会因为缺少 `Referer` 请求头而导致 `403 Forbidden` 错误。

您必须在请求中添加正确的 `Referer` 头才能成功获取图片。

以下是一个使用 `curl` 访问图片的示例：

```bash
curl --location 'https://chat-img.jwznb.com/a0068c6770fe2df08d1923287bb9cdbf.jpg' \
--header 'Referer: https://www.yhchat.com/'
```

## 额外接口的来源

本适配器提供的一些非官方的额外接口，

其实现逻辑来源于对以下几个 Web 页面的网络请求分析：

- `https://www.yhchat.com/user/homepage/7756242`
- `https://yhfx.jwznb.com/share?key=0FRmLHlPL47M&ts=1761497803`
- `https://yhfx.jwznb.com/share?key=m7Z4l2bLBWt2&ts=1761497822`
