# API 接口示例

本文档提供了一些云湖官方文档未包含的、但实际有用的 API 接口示例。

## 1. 获取群组信息

**接口描述**

通过群组 ID (`groupId`) 获取群组的详细信息。

|                  |                                                     |
| ---------------- | --------------------------------------------------- |
| **请求 URL**     | `https://chat-web-go.jwzhd.com/v1/group/group-info` |
| **请求方法**     | `POST`                                              |
| **Content-Type** | `application/json`                                  |

**请求示例 (cURL)**
```bash
curl --location 'https://chat-web-go.jwzhd.com/v1/group/group-info' \
--header 'Content-Type: application/json' \
--data '{
    "groupId": "big"
}'
```

**请求体 (Request Body)**

```json
{
    "groupId": "big"
}
```

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,                    // 状态码，1表示成功
    "data": {                     // 响应数据
        "group": {                // 群组信息
            "id": 1,               // 群聊在数据库中的序列
            "groupId": "big",      // 群聊ID
            "name": "全员群·(づ｡◕‿‿◕｡)づ",  // 群聊名称
            "introduction": "15亿用户总群\n新注册用户默认加入这个群，请不要刷屏发消息\n不想用全员群可以选择退群，退群后也可以重新加入\n玩机问题进对应手机群询问，不要在全员群询问\n\n在开始聊天前请阅读全员群规范: https://www.yhchat.com/c/p/796\n\n如有引导性消费或者不在正规平台进行交易的 请谨慎交易\n如有人称是本软件官方人员 请公开询问此群管理员或ID ",  // 群聊简介
            "createBy": "7058262", // 创建者ID
            "createTime": 0,       // 创建时间戳
            "avatarId": 32040,     // 头像ID
            "avatarUrl": "https://chat-img.jwznb.com/622528d954723767f3ad265c8b7fa4b9.png",  // 头像URL
            "headcount": 140033,   // 群人数
            "readHistory": 1,      // 历史消息设置，1表示允许新成员获取以前的历史消息
            "category": "",        // 群分类
            "uri": "http://chat.jwznb.com:8888/open-apis/v1/bot/send?token=",  // 机器人URI
            "groupBotRel": {       // 群组与机器人关系
                "id": 0,           // 关系ID
                "groupId": "",     // 群组ID
                "botId": "",       // 机器人ID
                "delFlag": 0,      // 删除标记，0表示未删除
                "createTime": 0,   // 创建时间戳
                "updateTsime": 0,  // 更新时间戳
                "bot": {           // 机器人信息
                    "id": 0,       // 机器人ID
                    "botId": "",   // 机器人标识ID
                    "nickname": "",  // 机器人昵称
                    "nicknameId": 0, // 昵称ID
                    "avatarId": 0,   // 头像ID
                    "avatarUrl": "", // 头像URL
                    "token": "",     // 机器人令牌
                    "link": "",      // 链接
                    "introduction": "",  // 机器人简介
                    "createBy": "",  // 创建者ID
                    "createTime": 0, // 创建时间戳
                    "headcount": 0,  // 使用人数
                    "private": 0,    // 是否私有，0表示公开
                    "uri": "",       // 机器人URI
                    "checkChatInfoRecord": {  // 聊天信息审核记录
                        "id": 0,             // 记录ID
                        "chatId": "",        // 聊天ID
                        "chatType": 0,       // 聊天类型
                        "checkWay": "",      // 审核方式
                        "reason": "",        // 审核原因
                        "status": 0,         // 审核状态
                        "createTime": 0,     // 创建时间戳
                        "updateTime": 0,     // 更新时间戳
                        "delFlag": 0         // 删除标记，0表示未删除
                    }
                }
            },
            "checkChatInfoRecord": {  // 聊天信息审核记录
                "id": 1160,            // 记录ID
                "chatId": "big",       // 聊天ID
                "chatType": 2,         // 聊天类型，2表示群聊
                "checkWay": "",        // 审核方式
                "reason": "",          // 审核原因
                "status": 0,           // 审核状态
                "createTime": 1670655084,  // 创建时间戳
                "updateTime": 1760143228,  // 更新时间戳
                "delFlag": 0           // 删除标记，0表示未删除
            }
        }
    },
    "msg": "success"              // 响应消息
}
```

</details>

## 2. 获取机器人信息

**接口描述**

通过机器人 ID (`botId`) 获取机器人的详细信息。

|                  |                                                 |
| ---------------- | ----------------------------------------------- |
| **请求 URL**     | `https://chat-web-go.jwzhd.com/v1/bot/bot-info` |
| **请求方法**     | `POST`                                          |
| **Content-Type** | `application/json`                              |

**请求示例 (cURL)**
```bash
curl --location 'https://chat-web-go.jwzhd.com/v1/bot/bot-info' \
--header 'Content-Type: application/json' \
--data '{
    "botId": "37090343"
}'
```

**请求体 (Request Body)**

```json
{
    "botId": "37090343"
}
```

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,                    // 状态码，1表示成功
    "data": {                     // 响应数据
        "bot": {                  // 机器人信息
            "id": 4066,           // 机器人ID
            "botId": "37090343",  // 机器人标识ID
            "nickname": "小学云bot",  // 机器人昵称
            "nicknameId": 186474, // 昵称ID
            "avatarId": 46831,    // 头像ID
            "avatarUrl": "https://chat-img.jwznb.com/883830a9441c9c8a5df343f1b0a96970.png",  // 头像URL
            "token": "",          // 机器人令牌
            "link": "",           // 链接
            "introduction": "使用koishi开发的云湖机器人",  // 机器人简介
            "createBy": "7756242", // 创建者ID
            "createTime": 1756785691,  // 创建时间戳
            "headcount": 1,       // 使用人数
            "private": 0,         // 是否私有，0表示公开
            "uri": "https://chat-go.jwzhd.com/open-apis/v1/bot/send?token=",  // 机器人URI
            "checkChatInfoRecord": {  // 聊天信息审核记录
                "id": 13142,      // 记录ID
                "chatId": "37090343",  // 聊天ID
                "chatType": 3,    // 聊天类型，3表示机器人
                "checkWay": "",   // 审核方式
                "reason": "",     // 审核原因
                "status": 0,     // 审核状态
                "createTime": 1756785691,  // 创建时间戳
                "updateTime": 0,  // 更新时间戳
                "delFlag": 0     // 删除标记，0表示未删除
            }
        }
    },
    "msg": "success"              // 响应消息
}
```

如果传入的`userId`是用户或不存在：
```json
{
    "code": -1,
    "msg": "机器人不存在"
}
```
</details>

## 3. 获取用户信息

**接口描述**

通过用户 ID (`userId`) 获取用户的公开信息。

|              |                                                  |
| ------------ | ------------------------------------------------ |
| **请求 URL** | `https://chat-web-go.jwzhd.com/v1/user/homepage` |
| **请求方法** | `GET`                                            |

**Query 参数**

| 参数     | 类型     | 必须 | 描述      |
| -------- | -------- | ---- | --------- |
| `userId` | `string` | 是   | 用户的 ID |

**请求示例 (cURL)**
```bash
curl --location 'https://chat-web-go.jwzhd.com/v1/user/homepage?userId=7756242'
```

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,                    // 状态码，1表示成功
    "data": {                     // 响应数据
        "user": {                 // 用户信息
            "userId": "7756242",  // 用户ID
            "nickname": "小学不在这里哦",  // 用户昵称
            "avatarUrl": "https://chat-img.jwznb.com/c07a80a9e21dd8d10abd2bd272c39fc8.jpg",  // 头像URL
            "registerTime": 1756135685,  // 注册时间戳
            "registerTimeText": "2025-08-25 23:28:05",  // 注册时间文本
            "onLineDay": 12,      // 累计在线天数
            "continuousOnLineDay": 10,  // 连续在线天数
            "medals": [],         // 勋章列表
            "isVip": 0            // 是否为VIP，0表示非VIP
        }
    },
    "msg": "success"              // 响应消息
}
```

如果传入的`userId`是机器人或不存在：
```json
{
    "code": 1,                    // 状态码，1表示成功
    "data": {                     // 响应数据
        "user": {                 // 用户信息（当用户不存在或为机器人时）
            "userId": "",         // 用户ID（空表示不存在或为机器人）
            "nickname": "",       // 用户昵称（空表示不存在或为机器人）
            "avatarUrl": "",      // 头像URL（空表示不存在或为机器人）
            "registerTime": 0,    // 注册时间戳（0表示不存在或为机器人）
            "registerTimeText": "1970-01-01 08:00:00",  // 注册时间文本（默认值）
            "onLineDay": 0,       // 累计在线天数（0表示不存在或为机器人）
            "continuousOnLineDay": 0,  // 连续在线天数（0表示不存在或为机器人）
            "medals": [],         // 勋章列表（空表示不存在或为机器人）
            "isVip": 0            // 是否为VIP，0表示非VIP
        }
    },
    "msg": "success"              // 响应消息
}
```

</details>
