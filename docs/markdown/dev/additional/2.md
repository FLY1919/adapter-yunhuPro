# 附录：API 接口示例

本文档提供了一些云湖官方文档未包含的、但实际有用的 API 接口示例。

## 1. 获取群组信息

**接口描述**

通过群组 ID (`groupId`) 获取群组的详细信息。

|                  |                                                     |
| ---------------- | --------------------------------------------------- |
| **请求 URL**     | `https://chat-web-go.jwzhd.com/v1/group/group-info` |
| **请求方法**     | `POST`                                              |
| **Content-Type** | `application/json`                                  |

**请求体 (Request Body)**

```json
{
    "groupId": "big"
}
```

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,
    "data": {
        "group": {
            "id": 1,
            "groupId": "big",
            "name": "全员群·(づ｡◕‿‿◕｡)づ",
            "introduction": "15亿用户总群\n新注册用户默认加入这个群，请不要刷屏发消息\n不想用全员群可以选择退群，退群后也可以重新加入\n玩机问题进对应手机群询问，不要在全员群询问\n\n在开始聊天前请阅读全员群规范: https://www.yhchat.com/c/p/796\n\n如有引导性消费或者不在正规平台进行交易的 请谨慎交易\n如有人称是本软件官方人员 请公开询问此群管理员或ID ",
            "createBy": "7058262",
            "createTime": 0,
            "avatarId": 32040,
            "avatarUrl": "https://chat-img.jwznb.com/622528d954723767f3ad265c8b7fa4b9.png",
            "headcount": 133290,
            "readHistory": 1,
            "category": "",
            "uri": "http://chat.jwznb.com:8888/open-apis/v1/bot/send?token=",
            "groupBotRel": {
                "id": 0,
                "groupId": "",
                "botId": "",
                "delFlag": 0,
                "createTime": 0,
                "updateTsime": 0,
                "bot": {
                    "id": 0,
                    "botId": "",
                    "nickname": "",
                    "nicknameId": 0,
                    "avatarId": 0,
                    "avatarUrl": "",
                    "token": "",
                    "link": "",
                    "introduction": "",
                    "createBy": "",
                    "createTime": 0,
                    "headcount": 0,
                    "private": 0,
                    "uri": "",
                    "checkChatInfoRecord": {
                        "id": 0,
                        "chatId": "",
                        "chatType": 0,
                        "checkWay": "",
                        "reason": "",
                        "status": 0,
                        "createTime": 0,
                        "updateTime": 0,
                        "delFlag": 0
                    }
                }
            },
            "checkChatInfoRecord": {
                "id": 1160,
                "chatId": "big",
                "chatType": 2,
                "checkWay": "",
                "reason": "",
                "status": 0,
                "createTime": 1670655084,
                "updateTime": 1760143228,
                "delFlag": 0
            }
        }
    },
    "msg": "success"
}
```

</details>

## 2. 获取机器人信息

**接口描述**

通过机器人 ID (`botId`) 获取机器人的详细信息。

|                  |                                                 |
| ---------------- | ----------------------------------------------- |
| **请求 URL**     | `https://chat-web-go.jwzhd.com/v1/bot/bot-info` |
| **请求方法**     | `POST`                                          |
| **Content-Type** | `application/json`                              |

**请求体 (Request Body)**

```json
{
    "botId": "37090343"
}
```

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,
    "data": {
        "bot": {
            "id": 4066,
            "botId": "37090343",
            "nickname": "小学云bot",
            "nicknameId": 186474,
            "avatarId": 46831,
            "avatarUrl": "https://chat-img.jwznb.com/883830a9441c9c8a5df343f1b0a96970.png",
            "token": "",
            "link": "",
            "introduction": "使用koishi开发的云湖机器人",
            "createBy": "7756242",
            "createTime": 1756785691,
            "headcount": 1,
            "private": 0,
            "uri": "https://chat-go.jwzhd.com/open-apis/v1/bot/send?token=",
            "checkChatInfoRecord": {
                "id": 13142,
                "chatId": "37090343",
                "chatType": 3,
                "checkWay": "",
                "reason": "",
                "status": 0,
                "createTime": 1756785691,
                "updateTime": 0,
                "delFlag": 0
            }
        }
    },
    "msg": "success"
}
```

</details>

## 3. 获取历史消息

**接口描述**

获取指定会话中的历史消息。

|              |                                                       |
| ------------ | ----------------------------------------------------- |
| **请求 URL** | `https://chat-go.jwzhd.com/open-apis/v1/bot/messages` |
| **请求方法** | `GET`                                                 |

**Query 参数**

| 参数         | 类型     | 必须 | 描述                        |
| ------------ | -------- | ---- | --------------------------- |
| `token`      | `string` | 是   | 机器人的 `token`            |
| `chat-id`    | `string` | 是   | 会话 ID (群组或用户)        |
| `chat-type`  | `string` | 是   | 会话类型 (`group` 或 `bot`) |
| `message-id` | `string` | 是   | 起始消息的 ID               |
| `before`     | `number` | 是   | 获取该消息之前的消息数量    |
| `after`      | `number` | 是   | 获取该消息之后的消息数量    |

**注意：** `before` 和 `after` 不能同时为 `0`。

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,
    "data": {
        "list": [
            {
                "msgId": "30e9dad15b5244f9a1465b4f6e7949d8",
                "senderId": "7756242",
                "contentType": "text",
                "content": { "text": "饿啊" },
                "sendTime": 1761136474991
            },
            {
                "msgId": "f8190054dde84502917c2e7d1f9deec0",
                "senderId": "7756242",
                "contentType": "text",
                "content": { "text": "找到了src" },
                "sendTime": 1761134603441
            }
        ],
        "total": 2
    },
    "msg": "success"
}
```

</details>

## 4. 获取用户信息

**接口描述**

通过用户 ID (`userId`) 获取用户的公开信息。

|              |                                                  |
| ------------ | ------------------------------------------------ |
| **请求 URL** | `https://chat-web-go.jwzhd.com/v1/user/homepage` |
| **请求方法** | `GET`                                            |

**Query 参数**

| 参数     | 类型     | 必须 | 描述      |
| -------- | -------- | ---- | --------- |
| `userId` | `string` | 是   | 用户的 ID |

**响应示例 (Response)**

<details>
<summary>点击展开/折叠</summary>

```json
{
    "code": 1,
    "data": {
        "user": {
            "userId": "7756242",
            "nickname": "小学不在这里哦",
            "avatarUrl": "https://chat-img.jwznb.com/5a350127fac2d72d66bdf02a03711889.png",
            "registerTime": 1756135685,
            "registerTimeText": "2025-08-25 23:28:05",
            "onLineDay": 5,
            "continuousOnLineDay": 3,
            "medals": [],
            "isVip": 0
        }
    },
    "msg": "success"
}
```

</details>
