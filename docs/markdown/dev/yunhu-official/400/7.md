# 图片上传

## 请求URL

`https://chat-go.jwzhd.com/open-apis/v1/image/upload?token=016ec8e4d17a4fbda3ccb0e99b44aca0`

### 请求类型

`POST`

### 请求头

```bash
Content-Type: "multipart/form-data"
```

### 请求参数

| 字段  | 类型 | 是否必填 | 说明                                            |
| ----- | ---- | -------- | ----------------------------------------------- |
| image | file | 是       | 图片内容，仅限单个图片，上传图片大小不超过 10MB |

### 响应内容

| 字段 | 类型   | 说明                   |
| ---- | ------ | ---------------------- |
| code | int    | 响应代码               |
| msg  | string | 响应信息，包括异常信息 |
| data | Object | 返回数据               |

## 完整示例

```bash
curl --location 'https://chat-go.jwzhd.com/open-apis/v1/image/upload?token=016ec8e4d17a4fbda3ccb0e99b44aca0' \
--header 'Content-Type: multipart/form-data' \
--form 'image=@"/D:/Pictures/素材图片/7.jpg"'
```

#### 图片上传响应示例

```json
{
    "code": 1,
    "data": {
        "imageKey": "FkaP4yunD3qbwZG2YEQQtwWog7ai"
    },
    "msg": "success"
}
```

## 注意事项

上传图片时，必须带有文件后缀名。

请根据MIME类型确定相应的扩展名。

> 即：注意上传网络图片的时候，如果URL里不带后缀名，需要处理后缀名后再上传。

### 特别注意

当文件被上传之后，云湖会进行一次文件后缀名处理。


:::warning
**特殊地**

当MIME类型为 `image/jpeg` 时，文件扩展名应为 `.jpg`，不要使用`.jpeg`。
:::

例如上传的文件信息为
```text
文件名: c91bb351c5fc283dfd9c95d0ec5d6c88.jpg [5/5]
图片大小: 152.0KB
修改日期: 2025/11/15 22:32:31
图片信息: 1024x1024 (Jpeg,YUV420)
```

即：上传一张`.jpeg`图片文件，会被云湖存储后将后缀名改为`.jpg`

比对文件URL：

- `https://chat-img.jwznb.com/c91bb351c5fc283dfd9c95d0ec5d6c88.jpg`
- `https://chat-img.jwznb.com/c91bb351c5fc283dfd9c95d0ec5d6c88.jpeg`

如果访问上述的 `.jpeg` 文件，会得到返回

```json
{
    "error": "Document not found"
}
```

代表 **文件不存在**。