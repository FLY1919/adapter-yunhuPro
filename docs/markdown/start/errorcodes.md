# 错误码说明

在使用 `adapter-yunhupro` 与云湖 API 进行交互时，您可能会在 Koishi 的日志中看到一些由 API 返回的错误码。理解这些错误码的含义可以帮助您快速诊断和解决问题。

云湖 API 的响应格式通常如下：

```json
{
  "code": 0,
  "msg": "success",
  "data": { ... }
}
```

当 `code` 字段的值不为 `0` 时，表示请求发生了错误。本页将列出一些常见的错误码及其可能的原因和解决方法。

## 通用错误码

| 错误码 | 含义         | 可能的原因与解决方法                                                                                                                 |
| :----- | :----------- | :----------------------------------------------------------------------------------------------------------------------------------- |
| `0`    | 成功         | 请求已成功处理。                                                                                                                     |
| `-1`   | 系统错误     | 云湖服务器内部发生未知错误。通常是临时性问题，可以稍后重试。如果问题持续存在，请联系云湖技术支持。                                   |
| `1`    | 请求参数错误 | 您发送到 API 的请求体或参数不符合规范。请检查您的代码或插件配置，确保所有必填字段都已提供且格式正确。                                |
| `2`    | Token 无效   | - 您的 `token` 配置不正确或已过期。<br>- 检查 Koishi 配置中的 `token` 是否与云湖后台的一致。<br>- 确认机器人是否被禁用或删除。       |
| `3`    | 权限不足     | - 机器人没有执行该操作的权限。<br>- 例如，尝试在非管理员群组中踢人，或调用一个未授权的 API。<br>- 检查机器人在云湖平台上的权限设置。 |
| `4`    | 频率限制     | 您在短时间内发送了过多的请求。请降低请求频率，或在代码中加入适当的延迟和重试逻辑。                                                   |
| `5`    | 资源不存在   | - 您尝试操作的资源（如消息、用户、群组）不存在或已被删除。<br>- 检查您请求中使用的 ID（如 `messageId`, `channelId`）是否正确。       |
| `1001` | 消息发送失败 | - 可能是网络问题，或是消息内容不合规（如包含敏感词）。<br>- 检查消息内容，并确认机器人是否被禁言。                                   |
| `2001` | 文件上传失败 | - 上传的文件过大，超过了云湖的限制。<br>- 文件格式不被支持。<br>- 网络连接不稳定。                                                   |

---

> **注意**：以上列表并未包含所有可能的错误码。
> 
> 如果您遇到未在此列出的错误，建议优先检查请求参数和网络环境，或查阅 [云湖官方开发文档](./../dev/yunhu-official.md) 以获取更详细的信息。
