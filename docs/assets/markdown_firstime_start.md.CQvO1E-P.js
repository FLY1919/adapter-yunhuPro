import{_ as a}from"./chunks/b9b1f3af-cb0c-4401-a20c-97bb5af4ee3c.-9_CBq-9.js";import{_ as t,z as e,m as r,ap as i}from"./chunks/framework.bQJNM8pB.js";const s="/adapter-yunhupro/assets/058e81af-eabf-44a8-9227-f023afd69711.tJJyE45I.png",l="/adapter-yunhupro/assets/e2868162-f2e9-4142-a1b4-b6a7b676e28f.COAH6659.png",n="/adapter-yunhupro/assets/dee633e3-6d9b-4e5d-9438-a8c2c8501647.Bc-O4DKG.png",p="/adapter-yunhupro/assets/2025-10-24_15-43-37.COPgmC4w.png",h="/adapter-yunhupro/assets/495cb157-5c28-4837-b736-40982172dd44.B4KQbHUK.png",q=JSON.parse('{"title":"首次接入指南","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/firstime/start.md","filePath":"markdown/firstime/start.md","lastUpdated":1761936734000}'),c={name:"markdown/firstime/start.md"};function d(u,o,m,g,_,b){return r(),e("div",null,[...o[0]||(o[0]=[i('<h1 id="首次接入指南" tabindex="-1">首次接入指南 <a class="header-anchor" href="#首次接入指南" aria-label="Permalink to &quot;首次接入指南&quot;">​</a></h1><h2 id="首次接入和配置" tabindex="-1">首次接入和配置 <a class="header-anchor" href="#首次接入和配置" aria-label="Permalink to &quot;首次接入和配置&quot;">​</a></h2><p>本指南将引导您完成 <code>adapter-yunhupro</code> 在 Koishi 中的首次接入和配置。</p><h2 id="_1-前置要求-公网访问" tabindex="-1">1. 前置要求：公网访问 <a class="header-anchor" href="#_1-前置要求-公网访问" aria-label="Permalink to &quot;1. 前置要求：公网访问&quot;">​</a></h2><p>云湖平台通过 Webhook 将事件（如消息、成员变动等）推送给您的机器人。</p><p>因此，在开始之前，您必须确保 Koishi 实例能够被公网访问。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>这意味着您需要具备<strong>以下条件之一</strong>：</p><ul><li>拥有一个公网 IPv4 或 IPv6 地址。</li><li>使用内网穿透服务（如 frp, Ngrok, Cloudflare Tunnel 等）将您的本地 Koishi 服务暴露到公网。</li></ul></div><p>具体的公网部署方法多样，本指南不详细展开。</p><p>请根据您的实际网络环境选择合适的方案。</p><h2 id="_2-在云湖平台创建机器人" tabindex="-1">2. 在云湖平台创建机器人 <a class="header-anchor" href="#_2-在云湖平台创建机器人" aria-label="Permalink to &quot;2. 在云湖平台创建机器人&quot;">​</a></h2><blockquote><p>下面教程以 云湖Windows版客户端 演示</p></blockquote><p>访问 <a href="https://www.yhchat.com/" target="_blank" rel="noreferrer">云湖官网</a> ，下载对应客户端。</p><p>注册并登录账号后，进入设置页面，创建一个新的机器人。</p><p><img src="'+s+'" alt="云湖后台"></p><h2 id="_3-获取机器人凭证" tabindex="-1">3. 获取机器人凭证 <a class="header-anchor" href="#_3-获取机器人凭证" aria-label="Permalink to &quot;3. 获取机器人凭证&quot;">​</a></h2><p>下面需要复制机器人账号的两个信息：ID、Token。</p><ol><li>打开云湖客户端，在与机器人的聊天对话页面，复制机器人的账号ID：</li></ol><ul><li><strong>机器人 ID (Bot ID)</strong>：这是您机器人的唯一标识。 <img src="'+l+'" alt="获取机器人ID"></li></ul><ol start="2"><li>打开<a href="https://www.yhchat.com/control" target="_blank" rel="noreferrer">官网控制台</a>，复制机器人的Token：</li></ol><ul><li><strong>机器人 Token</strong>：这是与云湖 API 通信的密钥。 <img src="'+n+'" alt="获取机器人Token"></li></ul><h2 id="_4-配置-koishi-适配器" tabindex="-1">4. 配置 Koishi 适配器 <a class="header-anchor" href="#_4-配置-koishi-适配器" aria-label="Permalink to &quot;4. 配置 Koishi 适配器&quot;">​</a></h2><p>在 Koishi 的插件市场中找到并安装 <code>adapter-yunhupro</code> 适配器，然后进入配置页面。</p><p>将上一步获取的 <strong>机器人 ID</strong> 和 <strong>Token</strong> 填入对应的配置项中。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong><code>path</code> (监听路径)</strong>: 这是 Webhook 的接收地址，默认为 <code>/yunhu</code>。</p><p>您可以自定义，但必须确保路径的唯一性。</p><p><strong>如果您配置了多个云湖机器人，每个机器人都必须使用不同的 <code>path</code></strong>。</p></div><p><img src="'+a+'" alt="Koishi配置项"></p><hr><h2 id="_5-确认订阅地址" tabindex="-1">5. 确认订阅地址 <a class="header-anchor" href="#_5-确认订阅地址" aria-label="Permalink to &quot;5. 确认订阅地址&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>注意 此步骤务必使用<strong>公网地址</strong>访问！</p></div><ol><li><strong>确认订阅地址</strong>：将您的 Koishi 公网访问地址与上一步配置的 <code>path</code> 组合成完整的 Webhook URL。 <ul><li>例如，如果您的公网域名是 <code>https://your.domain.com</code>，并且 <code>path</code> 配置为 <code>/yunhu</code>，那么完整的订阅地址就是 <code>https://your.domain.com/yunhu</code>。</li></ul></li><li><strong>打开浏览器访问订阅地址</strong>： <ul><li>如果你可以访问看到 <code>适配器已成功启动</code> 页面，则说明配置成功！</li></ul></li></ol><p><img src="'+p+'" alt="适配器已成功启动"></p><h2 id="_6-配置-webhook-和事件订阅" tabindex="-1">6. 配置 Webhook 和事件订阅 <a class="header-anchor" href="#_6-配置-webhook-和事件订阅" aria-label="Permalink to &quot;6. 配置 Webhook 和事件订阅&quot;">​</a></h2><p>回到云湖平台的机器人后台，进行以下配置：</p><ol><li><p><strong>配置订阅地址</strong>：假设您的订阅地址为 <code>https://your.domain.com/yunhu</code>。</p></li><li><p><strong>订阅事件</strong>：根据您的需求，勾选需要接收的事件类型。</p><ul><li>为了确保机器人能正常响应消息，<strong>「消息事件」</strong> 是必须订阅的。</li></ul></li></ol><p><img src="'+h+'" alt="配置订阅地址和事件"></p><h2 id="_7-测试连接" tabindex="-1">7. 测试连接 <a class="header-anchor" href="#_7-测试连接" aria-label="Permalink to &quot;7. 测试连接&quot;">​</a></h2><p>完成以上所有配置后，您可以对机器人进行一次简单的测试，以验证连接是否成功。</p><ul><li><strong>私聊</strong> 您的机器人，发送任意消息，例如 <code>status</code>。</li><li>如果您的 Koishi 机器人做出了回应，说明从云湖平台到 Koishi 的事件推送已经成功建立。</li></ul><hr><p>如果机器人没有响应，请检查以下几点：</p><ul><li>Koishi 服务是否正常运行？</li><li>公网地址和 Webhook 路径是否正确？</li><li>云湖后台的事件订阅是否已开启？</li><li>检查 Koishi 的控制台日志，确认是否有来自云湖的请求或任何错误信息。</li></ul><h2 id="关于「无公网-ip-订阅」的说明" tabindex="-1">关于「无公网 IP 订阅」的说明 <a class="header-anchor" href="#关于「无公网-ip-订阅」的说明" aria-label="Permalink to &quot;关于「无公网 IP 订阅」的说明&quot;">​</a></h2><p>目前，云湖平台的事件订阅机制<strong>强制要求</strong>一个<strong>可公网访问</strong>的 Webhook 地址。</p><p>关于未来是否支持如 WebSocket 等长连接方式，您可以关注官方的讨论：</p><ul><li><a href="https://github.com/yhchat/bot-go-sdk/issues/1" target="_blank" rel="noreferrer">能否有一种不需要公网IP就能订阅消息的方式？</a></li></ul>',44)])])}const P=t(c,[["render",d]]);export{q as __pageData,P as default};
