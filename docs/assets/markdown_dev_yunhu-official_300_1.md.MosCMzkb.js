import{_ as s,z as i,m as a,ap as n}from"./chunks/framework.bQJNM8pB.js";const B=JSON.parse('{"title":"事件订阅详述","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/dev/yunhu-official/300/1.md","filePath":"markdown/dev/yunhu-official/300/1.md","lastUpdated":1761823250000}'),h={name:"markdown/dev/yunhu-official/300/1.md"};function d(e,t,l,k,r,p){return a(),i("div",null,[...t[0]||(t[0]=[n(`<h1 id="事件订阅详述" tabindex="-1">事件订阅详述 <a class="header-anchor" href="#事件订阅详述" aria-label="Permalink to &quot;事件订阅详述&quot;">​</a></h1><p>事件订阅是系统可以将软件中的消息或其他事件（加入、退出群事件和关注、取关机器人事件）推送到你的服务器中，你的服务器可以根据对应的消息或者事件做出相应的反应。 推送是通过<code>HTTP</code>协议以<code>POST</code>请求的方式推送<code>JSON</code>格式的数据</p><p><strong>使用场景</strong></p><ul><li>你希望能对用户输入的内容做出相应反应时，比如当用户输入1+1=,你可以在服务器端收到这条消息，然后计算出结果，再通过消息发送接口告诉用户计算结果</li></ul><h2 id="事件列表" tabindex="-1"><strong>事件列表</strong> <a class="header-anchor" href="#事件列表" aria-label="Permalink to &quot;**事件列表**&quot;">​</a></h2><table tabindex="0"><thead><tr><th>事件名称</th><th>介绍</th><th>取值</th><th>状态</th></tr></thead><tbody><tr><td>普通消息事件</td><td>普通消息</td><td>message.receive.normal</td><td>可用</td></tr><tr><td>指令消息事件</td><td>指令消息</td><td>message.receive.instruction</td><td>可用</td></tr><tr><td>关注机器人事件</td><td>关注机器人事件</td><td>bot.followed</td><td>可用</td></tr><tr><td>取消关注机器人事件</td><td>取消关注机器人事件</td><td>bot.unfollowed</td><td>可用</td></tr><tr><td>加入群事件</td><td>用户加入群事件</td><td>group.join</td><td>可用</td></tr><tr><td>退出群事件</td><td>用户退出群事件</td><td>group.leave</td><td>可用</td></tr><tr><td>按钮事件</td><td>消息中按钮点击事件</td><td>button.report.inline</td><td>可用</td></tr><tr><td>快捷菜单事件</td><td>聊天框上方菜单按钮事件</td><td>bot.shortcut.menu</td><td>可用</td></tr></tbody></table><h2 id="消息事件" tabindex="-1">消息事件 <a class="header-anchor" href="#消息事件" aria-label="Permalink to &quot;消息事件&quot;">​</a></h2><h4 id="数据内容" tabindex="-1"><strong>数据内容</strong> <a class="header-anchor" href="#数据内容" aria-label="Permalink to &quot;**数据内容**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>version</td><td>string</td><td>事件内容版本号</td></tr><tr><td>header</td><td>Header对象</td><td>包括事件的基础信息</td></tr><tr><td>event</td><td>Event对象</td><td>包括事件的内容。注意：Event对象的结构会在不同的eventType下发生变化</td></tr></tbody></table><h4 id="header对象" tabindex="-1"><strong>Header对象</strong> <a class="header-anchor" href="#header对象" aria-label="Permalink to &quot;**Header对象**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>eventId</td><td>string</td><td>事件ID，全局唯一</td></tr><tr><td>eventTime</td><td>int</td><td>事件产生的时间，毫秒13位时间戳</td></tr><tr><td>eventType</td><td>string</td><td>事件类型</td></tr></tbody></table><h4 id="event对象" tabindex="-1"><strong>Event对象</strong> <a class="header-anchor" href="#event对象" aria-label="Permalink to &quot;**Event对象**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>sender</td><td>Sender对象</td><td>发送者的信息</td></tr><tr><td>message</td><td>Message对象</td><td>消息内容</td></tr></tbody></table><h4 id="sender对象" tabindex="-1"><strong>Sender对象</strong> <a class="header-anchor" href="#sender对象" aria-label="Permalink to &quot;**Sender对象**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>senderId</td><td>string</td><td>发送者ID，给用户回复消息需要该字段</td></tr><tr><td>senderType</td><td>string</td><td>发送者用户类型，取值：user</td></tr><tr><td>senderUserLevel</td><td>string</td><td>发送者级别，取值：owner、administrator、member、unknown</td></tr><tr><td>senderNickname</td><td>string</td><td>发送者昵称</td></tr></tbody></table><h4 id="chat对象" tabindex="-1"><strong>Chat对象</strong> <a class="header-anchor" href="#chat对象" aria-label="Permalink to &quot;**Chat对象**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>chatId</td><td>string</td><td>聊天对象ID</td></tr><tr><td>chatType</td><td>string</td><td>聊天对象类型，取值: bot、group</td></tr></tbody></table><h4 id="message对象" tabindex="-1"><strong>Message对象</strong> <a class="header-anchor" href="#message对象" aria-label="Permalink to &quot;**Message对象**&quot;">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>msgId</td><td>string</td><td>消息ID，全局唯一</td></tr><tr><td>parentId</td><td>string</td><td>引用消息时的父消息ID</td></tr><tr><td>sendTime</td><td>int</td><td>消息发送时间，毫秒13位时间戳</td></tr><tr><td>chatId</td><td>string</td><td>当前聊天的对象ID<br>单聊消息，chatId即对方用户ID<br>群聊消息，chatId即群ID<br>机器人消息，chatId即机器人ID</td></tr><tr><td>chatType</td><td>string</td><td>当前聊天的对象类型<br>group 群聊<br>bot 机器人</td></tr><tr><td>contentType</td><td>string</td><td>当前消息类型<br>text 文本消息<br>image 图片消息<br>markdown Markdown消息<br>file 文件消息</td></tr><tr><td>content</td><td>Content对象</td><td>消息正文</td></tr><tr><td>commandId</td><td>int</td><td>指令ID，可用来区分用户发送的指令</td></tr><tr><td>commandName</td><td>string</td><td>指令名称，可用来区分用户发送的指令</td></tr></tbody></table><h3 id="普通消息、指令消息事件json结构体示例" tabindex="-1"><strong>普通消息、指令消息事件JSON结构体示例</strong> <a class="header-anchor" href="#普通消息、指令消息事件json结构体示例" aria-label="Permalink to &quot;**普通消息、指令消息事件JSON结构体示例**&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;eventId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;eventTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1647735644000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;eventType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxxx&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;event&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;sender&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;senderId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;senderType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;senderUserLevel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;member&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;senderNickname&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;昵称&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;chat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;chatId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;chatType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;group&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;msgId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;parentId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;sendTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1647735644000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;chatId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;chatType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;contentType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;早上好&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;commandId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">98</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;commandName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;计算器&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="按钮汇报事件json结构体示例" tabindex="-1"><strong>按钮汇报事件JSON结构体示例</strong> <a class="header-anchor" href="#按钮汇报事件json结构体示例" aria-label="Permalink to &quot;**按钮汇报事件JSON结构体示例**&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;msgId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;recvId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;recvType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;bot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1702050343000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;userId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;value&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div>`,23)])])}const g=s(h,[["render",d]]);export{B as __pageData,g as default};
